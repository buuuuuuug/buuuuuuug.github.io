---
author: ChaneyChan
pubDatetime: 2024-04-10T20:42:00Z
modDatetime: 2024-04-10T20:42:00Z
title: 面试阿里国际记录-第一轮技术面
slug: interview
featured: true
draft: false
tags:
  - interview
description: 面试阿里国际-第一轮技术面试-电话面试
---

## Table of contents

## 基本信息

- 面试日期：2024-04-10
- 面试公司：阿里巴巴
- 面试职位：研发
- 面试官：在阿里待了六年
- 面试结果：待定

## 面试流程

1.  **自我介绍**

    - 介绍了自己的两段工作经历
    - 提了自己在当前的岗位的主要工作内容
    - 提到了自己的两个项目

2.  **技术问题**

    - 挑一个项目介绍一下：

      > 我介绍了统一配置中心这个项目，从公司的组织架构（多研发中心）和公司的业务模式（SAAS）出发，讲述了为什么会需要一个 '统一配置中心',
      > 这个配置中心解决了什么问题（这个地方逻辑比较混乱）

      参考回答：在介绍这个项目之前，我需要先花一两分钟介绍下公司的情况，核心为问题：一套系统、多个环境、多租户场景、多研发部门。

      什么影响呢：多研发部门，意味着做基础开发在项目推进方面困难重重；多租户场景，意味着配置需要个性化， 结合一套系统的现状，意味着配置的混乱；多环境意味着我们需要解决 _配置的跨环境问题_,从测试环境复制到生产环境、从生产环境A复制到生产环境B；

      另外还有一个配置上的痛点：

      配置项零散，配置修改没有章法可循，只能找到熟悉这个功能的人，才知道该配哪个字段，每个字段什么含义。

      基于以上的现状，我们独立设计了一套 支持配置聚合、功能异化配置、配置跨环境同步、配置版本管理 的统一配置中心。

      这个项目的实践中用到了 Mysql数据存储、Apollo作为配置下发通道、MQ也作为配置下发通道、debezium作为存量数据同步工具和配置变更监控工具。

      这个项目给我带来的最大的收获就是：

      - 设计了一个功能集的概念将零散的配置在实践中聚集成为有真实业务语义的功能，形成知识的沉淀。同时它成功地屏蔽了一个功能涉及的多个服务的复杂性，而专注于配置本身

      - 推销项目的能力，个人的沟通能力
      - 更新了个人观念：原本认为项目应该用最简洁优雅的方式实现，现在我认为实现目的是更重要的。

    - 问了为什么有两种消费模式，为什么不是通过`HTTP`请求

            两种方式是应对我们的接入方主要有两种模式： 一种是原本的配置平台，他们自带配置存储能力，管理着相关的服务；另一种就是不具备配置存储能力的服务，使用SDK接入。
            为什么不用HTTP请求方式下发数据：拗不过一些部门，非说调接口改造大，风险大。
            MQ作为配置下发的方式是有很多问题的：我们需要检测MQ对应TOPIC的消费状态，需要判断一条消息是被正确消费了还是被丢弃了。

    - 问了如何保证一致性的（配置同时生效）两阶段提交
            先投递消息，我们封装的`SDK`会在启动时就监听对应的`topic`，收到消息会第一时间做验证，这部分验证是消费方既有的系统功能，能够判断这一批数据是不是符合要求的，然后回给`broker`端一个`ACK`或者`NACK`，我们的平台会监控这些消息的消费结果，只有当所有消费方都回复了ACK，系统上就允许下一步正式应用——再一个确认生效消息，消费者就能之前收到的配置数据正式写入数据库。 对于APOLLO模式，我们的SDk在启动的时候会监听和服务名对应的`namespace`，第一次预发布，就对应着在apollo中修改了key，但是尚未发布，第二步，确认应用，就会将配置数据正式发布。
    - 如果确认的时候消费方写入失败怎么办

            考虑不周，没有处理

    - 问了了不了解RocketMQ的广播模式，为什么没用广播模式

            了解过一点，但是不适用这个项目的场景
            第一，广播模式允许一个`topic`被多个消费者独立消费。但是哪些字段该发到广播队列呢？所有吗？会对服务造成很大的压力，他会处理很多自己不关心的配置。我们认为每个服务只应该接收自己订阅的 字段的消息
            第二，实践上太麻烦，一个消费方服务在运行过程 中不能轻易地调整他所消费的topic，但是字段 和服务的订阅关系是动态的，就导致，理论上 A、B、C三个服务需要 7（2^n - 1, n为服务的数量）个队列才能实现，每个服务只会收到自己想要的配置数据

    - 介绍动态网关项目，为什么 会有这个n项目

      - 出入口网关混乱
      - 通用功能抽离提高复用性

    - 里面的核心技术：虚拟线程，问了它的实现和优点

      - 从传统的 thread per request 模型，说明，物理线程和平台线程的对应关系 在 虚拟线程中发生了变化，变成了 n 对 1，当虚拟线程发生阻塞，会主动 `yield`从而让出平台线程，当阻塞结束会 重新入队等待调度。

      从实现上看，jdk21中引入了 `Continuation` 你面 核心两个属性，一个叫做 `task`、一个就是 `ForkJoinPool`

    - 虚拟线程有什么缺点

      - 面试时回答了 `pin`状态的引起的载体线程阻塞 和 thradLocal适配问题
      - 还有一点是 缺乏抢占式调度的问题，虚拟线程只会在阻塞时让出平台线程，如果一个虚拟线程执行无阻塞任务，他会大量占用平台线程时间，影响虚拟线程之间的公平性

    - 压测数据情况

    - 可用性保障

      - 充分的压测
      - 合理的集群部署
      - 全面的监控

    - 工作中觉得最难的是什么
      - 和人打交道

3.  **其他环节**
    - 你对职级有什么要求
    - 你对薪资期望是多少
    - 你对从基础开发到应用开发是什么感受
    - 你还有什么想了解的

## 面试反馈

> 无

## 后续行动计划

- 重新梳理了项目上面的细节

## 总结

- 自我感觉很不错的面试
- 没有笔试
- 围绕项目展开

## 附录

- RocketMQ的广播模式
